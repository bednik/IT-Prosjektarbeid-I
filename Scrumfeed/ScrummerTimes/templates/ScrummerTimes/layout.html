<!DOCTYPE html>
<html lang="en">
<head>
     {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    {% block css %}
        <link rel="stylesheet" href="{% static 'ScrummerTimes/style.css' %}">
    {% endblock %}

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">

    {% for style in styles %}
        {% if style.is_marked %}
            {% if style.style == "Dark" %}
            <link rel="stylesheet" href="{% static 'ScrummerTimes/Dark.css' %}">
            {% elif style.style == "Light" %}
            <link rel="stylesheet" href="{% static 'ScrummerTimes/Light.css' %}">
            {% elif style.style == "Colorful" %}
            <link rel="stylesheet" href="{% static 'ScrummerTimes/Colorful.css' %}">
            {% elif style.style == "Oreo" %}
            <link rel="stylesheet" href="{% static 'ScrummerTimes/oreo.css' %}">
            {% elif style.style == "Sky" %}
            <link rel="stylesheet" href="{% static 'ScrummerTimes/sky.css' %}">
            {% elif style.style == "Normal" %}
            <link rel="stylesheet" href="{% static 'ScrummerTimes/style.css' %}">
            {% endif %}
        {% endif %}
    {% endfor %}



    <title>The Scrummer Times</title>
    <style>
        #dropdown-content {
            display: none;
            float: left;
            max-width: 40px;
            margin-left: 10%;
        }

        select {
            display: block;
            width: 120px;
        }
    </style>
</head>

<body>
     <header style="position:relative">

        <!--<h1>The Scrummer Times</h1>-->
        <div class="navbar-fixed">
            <ul id="adminThings" class="dropdown-content">
                <li>
                    <a href="/admin">Admin</a>
                </li>
                <li>
                    <!-- Goes to the form that does the editing, also saves what the previous site was! -->
                    <a href="{% url 'stylesite' %}?next={{ request.path|urlencode }}">Style</a>
                </li>
                <li>
                    <!-- Goes to the form that does the editing, also saves what the previous site was! -->
                    <a href="{% url 'requestrole' %}?next={{ request.path|urlencode }}">Assign Roles</a>
                </li>
            </ul>
            <ul id="authorThings" class="dropdown-content">
                <li>
                    <!-- Goes to the form that does the editing, also saves what the previous site was! -->
                    <a href="{% url 'createarticle' %}?next={{ request.path|urlencode }}">New Article</a>
                </li>
                <li>
                    <a href="{% url 'mydrafts' %}">My Drafts</a>
                </li>
                <li>
                    <!-- Goes to the form that does the editing, also saves what the previous site was! -->
                    <a href="{% url 'myarticles' %}?next={{ request.path|urlencode }}">Submitted Articles</a>
                </li>
            </ul>
            <ul id="executiveThings" class="dropdown-content">
                {% if perms.ScrummerTimes.review_article %}
                        <li>
                            <a href="/ScrummerTimes/feedUnread">Proofreading</a>
                        </li>
                {% endif %}
                {% if perms.ScrummerTimes.publish_article %}
                <li>
                    <a href="/ScrummerTimes/feedUnpublished">Publishing</a>
                </li>
                {% endif %}
                {% if perms.ScrummerTimes.edit_categories%}
                <li>
                    <a href="{% url 'managesite' %}?next={{ request.path|urlencode }}">Manage Site</a>
                </li>
                <li>
                    <a href="{% url 'analytics' %}?next={{ request.path|urlencode }}">Analytics</a>
                </li>
                {% endif %}
            </ul>
            <!-- Navbar proper -->
            <nav id="navbar">
                <ul>
                    <li class="brand-logo right" >
                        {% load static %}
                        <img src="{% static 'ScrummerTimes/LogoMakr_2o6PKh.png' %}" style="width:250px;margin-top: 10px;">
                    </li>
                    <li>
                        <a href="/ScrummerTimes/feed">Home</a>
                    </li>
                    {% if user.is_authenticated %}
                        {% if request.user.is_superuser %}
                            <li>
                                <a class="dropdown-trigger" href="#!" data-target="adminThings" >Admin panel</a>
                            </li>
                        {% endif %}
                    <!-- Only Authors can create an article -->
                        {% if perms.ScrummerTimes.create_article %}
                        <li>
                            <a class="dropdown-trigger" href="#!" data-target="authorThings">Article management</a>
                        </li>
                        {% endif %}

                        {% if perms.ScrummerTimes.review_article %}
                        <li>
                           <a class="dropdown-trigger" href="#!" data-target="executiveThings" >Editor</a>
                        </li>
                        {% endif %}


                        <li class="right" style="margin-right: 300px">

                            <form class="logout-link" action="{% url 'accounts:logout' %}" method="post">
                                {% csrf_token %}
                                <button class="waves-effect waves-light btn-small" type="submit" method="post">Log out</button>
                            </form>
                        </li>
                    {% else %}
                        <li>
                            <a href="{% url 'accounts:login' %}">Log in</a>
                        </li>
                        <li>
                            <a href="{% url 'accounts:signup' %}">Sign up</a>
                        </li>
                    {% endif %}

                    {% if user.is_authenticated %}
                    <li class="right" style="margin-right: 10px">
                            <a href="{% url 'accounts:profile' %}">{{request.user}}</a>
                        </li>
                    {% endif %}

                </ul>
            </nav>
        </div>
    </header>


  <!-- Switch -->
  <!--<div class="switch">
    <label>
      Off
      <input type="checkbox" id="dracula" onclick="dracula()">
      <span class="lever"></span>
      On
    </label>
  </div>-->


        <!-- Testing some messages feedback stuff-->
{% if messages %}
  <ul class="messages" style = "text-align: center;padding:auto;">
    {% for message in messages %}
      <div style="width:50%; margin: 0 auto;">
      <li class="{{ message.tags }}" style = "background-color:lightpink; border-radius:5px; margin:auto;">{{ message }}</li>
          </div>
    {% endfor %}
  </ul>
{% endif %}
{% if request.path == '/ScrummerTimes/feed/' %}

     <div id="categories">
        <form id="category-filter" method="post">
            {% csrf_token %}
            {{form.category}} <br>

        </form>
    </div>

     {% endif %}
    <div id="container" class="container center-align">

        {% block content %}
        {% endblock %}
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

<script>

    $(document).ready(function() {
        $(".dropdown-trigger").dropdown();
    });

    let clicked = false;
    function toggleCategories() {
        if (!clicked) {
            clicked = true;
            document.getElementById("dropdown-content").style.display="block"
        } else {
            clicked = false;
            document.getElementById("dropdown-content").style.display="none";
        }
    }
/*
    function dracula() {
    // Get the checkbox
    var checkBox = document.getElementById("dracula");
    var navbar = document.getElementById("navbar")

     if (checkBox.checked == true){
        document.body.style.background = "black";
        navbar.style.backgroundColor = "gray";
        y = document.getElementById('container');
        y.style.color="white";


     }
     else if(checkBox.checked == false){
         document.body.style.background = "white";
         y = document.getElementById('container');
        y.style.color="black";
         navbar.style.backgroundColor = "#e57373";
     }
}*/


</script>

</body>
</html>